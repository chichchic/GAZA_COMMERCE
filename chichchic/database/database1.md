# 파일 시스템
데이터를 관리하기 위해 여러기능을 제공하는 소프트웨어
응용 프로그램마다 필요한 데이터를 별도의 파일로 관리한다.
-> 데이터 중복성 문제
1) 저장 공간 낭비
2) 데이터 일관성, 무결성 유지가 어렵다.
3) 데이터 종속성 문제 (사용 파일 구조 변경시 응용 프로그램도 바뀌어야하는 문제)

# 데이터 베이스 관리 시스템
**장점**
1. 중복 통제
2. 독립성
3. 동시 공유
4. 보안 향상
5. 무결성 확보
6. 표준화
7. 장애 발생시 회복 가능
8. 응용 프로그램 개발 비용 절감

**단점**
1. 비용이 증가한다.
2. 백업과 회복 방법이 복잡하다.
3. 중앙 집중관리의 취약성(새로운 보안 이슈, centeral failure 등)


## 세대별 DB
*1세대 DB*
네트워크 DBMS(그래프 형태)
계층 DBMS(트리 형태)
*2세대*
관계 DBMS(테이블 형태)
*3세대*
객체지향 DBMS(객체를 이용해 DB 구성)
객체 관계 DBMS(객체DBMS + 관계 DBMS)

### 용어 정리
- 스키마: 데이터 베이스에 저장되는 데이터 구조와 제약 조건 정의
- 인스턴스: 스키마에 따라 데이터베이스에 실제로 저장된 값

## 3단계 DB구조
1. 내부 단계: 물리적 저장 장치의 관점
2. 개념 단계: 조직 전체의 관점
3. 외부 단계: 개별 사용자의 관점

### 내부 단계(내부 스키마)
저장 장치에 실제로 저장되는 방법 정의
레코드 구조, 필드 크기, 레코드 접근 경로 등 물리정 저장 구조를 정의
내부 스키마는 "한개만" 존재한다.

### 개념 단계(개념 스키마)
개념 단계에서 DB전체의 논리구조 정의
조직 전체의 관점에서 생각
어떤 데이터, 어떤 관계, 제약 조건, 보안 정책, 접근 권한 정의
개념 스키마는 "한개만" 존재한다.

### 외부단계(외부 스키마)
외부 단계에서 사용자가 필요한 DB를 정의한것
사용자마다 다른 형태
sub schema라고도 한다.
외부 스키마는 "여러개"존재 가능하다.(하나의 DB에)

위 3단계 구조는 모두 연결되어 있다. -> 종속석 문제가 발생
이를 해결하기 위해 사상(Mapping)을 둔다.

## 사상(Mapping)
외부 단계 - (논리적 데이터 독립성, 외부/개념 사상) - 개념 단계
개념 단계 - (물리적 데이터 독립성, 개념/내부 사상) - 내부 단계

외부/개념 사상 = 응용 인터페이스
개념/내부 사상 = 저장 인터페이스

# 데이터 모델링
데이터를 컴퓨터로 옮기는 과정
설계의 핵심 과정
추상화(구조화)가 핵심

현실 - 사용할 데이터 결정 ->  개념적 모델링(사람이 잘 이해할 수 있도록 표현) - 컴퓨터가 알 수 있게 결정 -> 논리적 모델링

**개체 관계 모델(ER Model)**
개체와 개체간의 관계를 "개념적 구조"로 표현

**개체 관계 다이어그램(ER Diagram)**
개체,관계 모델을 그림으로 표현

1. 개체(사각형으로 표현, RDBMS에서 테이블 이름이 된다.)
구별되는 모든것
다른 개체와 구별되는 이름을 가지고 있다.
개체만의 특성이나 상태, 즉 속성을 하나이상 가진다.
2. 속성(타원에 표현)
개체나 관계가 가지고 있는 고유의 특성
의미있는 데이터의 가장 논리적인 단위

*속성의 종류*
a. 개수에 따른 구분
단일 값 속성(값을 하나만, ex. 이름)
다중 값 속성(값을 여러개 가질 수 있다. ex. 고객 개체의 연락처 속성, 책의 저자. 이중 타원으로 표시)

b. 속성의 세분화 가능성에 따른 구분
단순 속성(더는 분해할 수 없는 속성, ex. 적립금)
복합 속성(분해가 가능한 속성, ex. 생년월일, 주소. 타원에 타원을 연결해 표시)

c. 유도 속성
다른 속성에 의해 자동으로 결정되는 값(ex. 판매 가격 = 가격 * 할인율. 점선 타원으로 표시)

d. key 속성(밑줄을 그은 타원으로 표시)

3. 관계(마름모로 표현. 관련있는 객체끼리 묶는다. RDBMS에서 테이블로 표현)
속성값을 가진다.
관계에 참여하는 개체수에 따라 N항 관계로 부른다.
Mappingg cardinarity(1:1 관계, 1:N관계, N:M관계 존재)

*관계 참여 특성*
필수 참여(2줄로 표현)
선택 참여(부분 참여, 한줄로 표현)
종속적 관계(강한 연결 관계, 약한 연결 관계)

# 데이터 모델
## 계층 데이터 모델 <논리적 데이터 모델 1>
논리 구조가 트리 형태이다.
상하관계가 성립한다.
다대다(n:m)이 불가능하다. 일대다(1:n)만 가능하다.
삽입 삭제 수정 검색이 쉽지 않다.

## 네트워크 데이터 모델 <논리적 데이터 모델 2>
논리구조가 그래프 형태
다대다(n:m)이 불가능하다.
구조가 복잡하고 삽입, 삭제, 수정, 검색이 쉽지 않다.

이러한 문제로 관계형 데이터 모델(표의 형태, Relation & Table)이 탄생했다.

Relation: 테이블 전체를 부르는 명칭
Tuple: 테이블의 데이터를 가로로 묶은 데이터 셋. 객체에 대한 정보를 가지고 있다.
Attribute: 테이블의 데이터를 세로로 묶은 데이터 셋. 구성하는 값들은 같은 Domain으로 되어있다. 속성이라고도 불린다.
cardinality: tuple의 수
degree: attribute의 수
domain: 속성이 가질 수 있는 값.

## Relation Schema(구조)
논리적 구조
모든 속성의 이름으로 정의

## Relation Instance(값)
Relation에 존재하는 Tuple의 집합

Database에 relation이 포함되는 개념이다.

### Tuple의 속성
1. 유일성
값이 독립적이다.
2. 무순서
순서가 상관없이 저장된다.

### Attribute의 속성
1. 무순서
순서가 상관없이 저장된다.
2. 원자값
더 나눠질 수 없다.

### Key in Relation
Tuple들을 구별하는 속성의 집합
1) 유일성 -> 모두 다른값을 가진다.
2) 최소성 -> 최소한의 Attribute만 구성한다.(여러 속성이 모여서 key를 이루기도 한다.)

슈퍼키[유일성 만족] - 후보키[유일성, 최소성 만족. 기본키(선택된 키) + 대체키로 구성]

### 외래키
다른 relation의 기본키를 참조하는 Attribute
기본키 속성으 ㅣ이름은 달라도 되지만 도메인은 같아야한다.
외래키 여러개가 존재 가능하다. 외래키를 기본키로 사용 가능하다.
NULL값을 가질 수 있다.

### 무결성 제약 조건
일관된 상태로 유지하기 위한 제약
1. 개체 무결성
기본키는 NULL값을 가질 수 없다.
2. 참조 무결성
외래키는 참조할 수 없는 값을 가질 수 없다.
3. 도메인 무결성
특정 속성값은 그 속성이 정의된 도메인에 속한 값이어야 한다.
4. 키 무결성
릴레이션에는 최소한 하나의 키가 존재해야한다.
5. null 무결성
특정 속성은 null을 가질 수 없다.
6. 고유 무결성
특정 속성값은 서로 달라야한다.

# DB 연산자(관계 대수)
## 일반 집합 연산자
### union (합집합)
중복은 생략되어 1개만 등록된다.
차수는 R과 S의 차수와 동일하다.
Cardinality는 같거나 작다.(R+S보다)
교환, 결합 법칙이 성립한다.

### intersection(교집합)
중복된 값만 등록
차수는 R과 S의 차수와 동일하다.
Cardinality는 같거나 작다(R+S보다)
교환, 결합 법칙이 성립한다.

### Difference(차집합)
R에서 R.S와 중복된 값을 생략한다.
차수는 R과 S의 차수와 동일하다.
Cardinality는 같거나 작다(R+S보다)
교환, 결합 법칙이 성립하지 않는다.

### Catesian Product(카티션 프로덕트)
R과 S간의 가능한 조합을 다 만든다.
차수는 R+S차수
Cardinality는 R*S의 값
교환, 결합 법칙이 성립한다.

## 순수 집합 연산자
### Select
Relation where 조건식(predicate라고 한다.)
(비교 연산자, 논리 연산자를 사용한다.) 결과는 수평적 부분 집합

### Project
속성을 골라오는 행위(Attribute, 세로줄)

### Join
두 Relation을 조합하여 결과 구성(테이블간에도 가능하다.)
자연 조인은 중복을 제외한다.
세타 조인은 중복을 제외하지 않는다.

### Division
포함관계로 이루어져야한다. R2를 모두 만족시키는 R1만 추출한다.

### Semi Join
R2 내용은 R1에서 만족하는 속성만 가져온다.
외부조인, R1과 연결되지 않은 R2 내용에 NULL값을 더해 생성한다.